# AOP那点事儿

# 基本概念

## AOP是什么
Aspect Orientd Programma 面向切面编程。
- 传统的是纵向的编程，自上而下
- 横向的编程：在没有改变原有逻辑的前提下，增加新的功能（横着加进去，切入）
  - 声明式事务
  - 日志服务
  - 安全
  - 缓存

## 作用
- 提供声明式服务（例如声明式事务）
- 允许用户实现自定义切面


把公共的业务逻辑提取出来


## 好处
- 使得真实角色处理的业务更加纯粹，不再去关注一些公共服务
- 公共的业务由代理来完成——实现了业务的分工
- 将公共业务和领域业务（共同业务抽出来——>领域模型，比如日志，支付业务、校验等等）结合起来

## 常用术语
- 关注点：日志、事务、安全、缓存等等需要切入的一些业务或事件。
  - 一个关注点可能横切多个对象，其实就是多个地方要加日志之类的。

1. **切面Aspect：** Aspect 声明类似于 Java 中的类声明，在 Aspect 中会包含着一些切入点Pointcut 以及对切入点进行相应的操作的通知Advice。**一个关注点的模块化**
2. **连接点Joint point：**表示在程序中明确定义的点，典型的包括方法调用，对类成员的访问以及异常处理程序块的执行等等，它自身还可以嵌套其它连接点jointpoint。**一个方法的执行**
3. **切入点Pointcut：** 表示一组连接点jointpoint，这些连接点或是通过逻辑关系组合起来，或是通过通配、正则表达式等方式集中起来，它定义了相应的操作处理通知Advice将要发生的地方。
4. **通知Advice：** Advice 定义了在切入点pointcut 里面定义的程序点具体要做的操作和处理，它通过 before、after 和 around 来区别是在每个切入点之前、之后还是代替执行的代码。还有异常通知。
5. **目标对象Target：** 代理的目标对象，即切面要被应用到的目标对象。
6. **织入Weave：** 指将切面应用到目标对象，并导致代理对象创建的过程。


## Advice通知
 Advice通知是AOP联盟定义的一个接口，定义当拦截到连接点做相应的处理操作，为切面增强提供织入接口。在spring AOP中，通知主要描述Spring AOP围绕方法调用而注入切面的行为，Spring AOP的通知扩展了AOP联盟的通知接口，提供了前置通知BeforeAdvice、后置通知AfterReturningAdvice、最终通知AfterAdvice和例外通知ThrowsAdvice等。

# 实现方式

## 通过API实现

## 通过注解实现

## 通过方法实现